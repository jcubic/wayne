<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <meta name="Description" content=""/>
    <link rel="shortcut icon" href=""/>
    <script>
     if ('serviceWorker' in navigator) {
         var scope = location.pathname.replace(/\/[^\/]+$/, '/');
         navigator.serviceWorker.register('sw.js', { scope })
                  .then(function(reg) {
                      reg.addEventListener('updatefound', function() {
                          var installingWorker = reg.installing;
                          console.log('A new service worker is being installed:',
                                      installingWorker);
                      });
                      // registration worked
                      console.log('Registration succeeded. Scope is ' + reg.scope);
                  }).catch(function(error) {
                      // registration failed
                      console.log('Registration failed with ' + error);
                  });
     }
    </script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>
  <h1>URL blocker</h1>
  
  <input id="input" list="urls"/><button id="send">send</button>
  <datalist id="urls">
    <option value="https://github.com/jcubic/wayne"></option>
    <option value="https://google.com"></option>
    <option value="https://cdn.jsdelivr.net/npm/@jcubic/wayne/index.umd.min.js"></option>
  </datalist>
  <pre id="output"></pre>
  <script type="module">
    import { set } from 'https://cdn.jsdelivr.net/npm/idb-keyval@6/+esm';

    set('__hosts__', ['cdn.jsdelivr.net', 'localhost']);
    
    send.addEventListener('click', () => {
      const url = input.value.trim();
      if (url) {
        fetch(url).then(res => {
          output.innerHTML += `${url} => Status ${res.status}\n`;
        });
      }
    });
   </script>
</body>
</html>
